# Дипломный проект: Реализация функционала самообучения для студентов
# Задача
1. Создать платформу, которая работает только с авторизованными пользователями. <br>
Права доступа: только **авторизированные пользователи**<br><br>
2. На платформе необходимо предусмотреть функционал разделов и материалов. Для каждого материала можно добавить тесты<br>
Сущности:
- Темы (Topics)
- Разделы (Materials)
- Вопросы (Questions)
- Ответы (Answers)
- Пользователь (User)
- Роль пользователя(UserRoles)

3. Управление всеми сущностями необходимо реализовать через стандартный Django 
admin. Проверка ответа на тест осуществляется с помощью отдедльного запроса 
на бэкенд. Реализовать либо Rest API, либо SSR.
Для реализации проекта использовать фреймворк Django. <br><br>

---
# Цель проекта
В интернете есть много информации касательно учебного материала, но что-то представлено слишком запутано, где-то очень 
много теоретической части и суть уловить сложно, и вся информация не структурирована, что очень затрудняет восприятие 
и в целом процесс обучения. Данный проект на начальном этапе решает эти проблемы: темы будут последовательны и в каждой 
теме будут свои разделы где также можно проверить насколько понял материал в тестовом формате. Так же каждый желающий после 
авторизации может стать не только студентом платформы, но и модератором тем разделов и даже тестов.

---
## Принцип работы

Пользователь выбирает нужную тему, и в каждой теме есть перечень разделов, которые выбирает пользователь и там уже может
ознакомиться с теоретической базой, а затем перейти к блоку тестов.

В тестах программа проверяет выбранные ответы пользователя, а затем выводит статистику после завершения теста.

Также для авторов, которые будут создавать данные темы и тесты есть ряд требований:
Названия тем, разделов, тестов уникальны и принимаются с заглавных букв, при создании нового объекта к ней привязывается
пользователь, при создании ответов обязательно нужно указать верный это ответ либо нет, в админ странице доступен и поиск
и фильтрация.

В каждом подразделе есть ряд вопросов, на которые пользователь может ответить.

---

## Модели:
1. Topics:
    - title - название темы
    - description - описание темы
    - author (ForeignKey(users.User)) - связь с моделью User через ключ ForeignKey, необязательное поле, при создании темы
пользователь привязывается автоматически
2. Materials:
    - title - название раздела
    - description - описание раздела
    - author (ForeignKey(users.User)) - связь с моделью User через ключ ForeignKey, необязательное поле, при создании раздела
пользователь привязывается автоматически
    - study_topic - (ForeignKey(Topics)) - связь с моделью Topics через ключ ForeignKey
3. Questions:
   - question - вопрос
   - item_materials (ForeignKey(Materials)) - связь с моделью Materials через ключ ForeignKey
   - author (ForeignKey(users.User)) - связь с моделью User через ключ ForeignKey, необязательное поле, при создании вопроса
   пользователь привязывается автоматически
4. Answers:
   - answer - ответ
   - question - (ForeignKey(Questions)) - связь с моделью Questions через ключ ForeignKey
   - is_correct - правильный или нет ответ
   - not_correct - ответ пользователя верный или нет
   - author (ForeignKey(users.User)) - связь с моделью User через ключ ForeignKey, необязательное поле, при создании ответа
   пользователь привязывается автоматически
5. User:
    - email - почта
    - first_name - имя (необязательное поле)
    - last_name - фамилия (необязательное поле)
    - image - аватар (необязательное поле)
    - role - роль пользователя: пользователь или модератор, по умолчанию пользователь.
    - is_active - авторизация пользователя
6. UserRoles:
    - AUTHOR - пользователь будет автором и иметь все права этой роли
    - MODERATOR - пользователь будет модератором и иметь все права этой роли
---

## Адреса (Postman)

**1. User:**
- http://127.0.0.1:8000/users/list/ - выводит список всех пользователей (GET)
- http://127.0.0.1:8000/users/view/1/ - выводит пользователя с id = 1 (GET)
- http://127.0.0.1:8000/users/update/1/ - обновляет пользователя с id = 1 (PATCH)
```
{
    "id": 1,
    "password": "pbkdf2_sha256$720000$iBMJPff1KKjuSPpNMWubdC$x7+56PIk2baI3dHPb1yDD00eZAmDbo0gXyWcEHf5tjc=",
    "last_login": "2023-12-12T18:43:30.168953Z",
    "is_superuser": true,
    "is_staff": true,
    "date_joined": "2023-12-12T17:48:12.802364Z",
    "email": "admin@study.ru",
    "last_name": "Admin",
    "first_name": "Admin",
    "image": null,
    "role": null,
    "is_active": true,
    "groups": [],
    "user_permissions": []
}
```
- http://127.0.0.1:8000/users/delete/1/ - удаляет пользователя с id = 1 (DELETE)
- http://127.0.0.1:8000/users/registration/ - создает пользователя (POST)
```
{
    "password2":"1234",
    "password": "1234",
    "email": "test@test.ru",
    "first_name":"test"
}
```
- http://127.0.0.1:8000/users/token/ - формирует токен для каждого пользователя с правами соответствующие их роли
```
{
    "email":"test@test.ru",
    "password":"1234"
}
```
- http://127.0.0.1:8000/users/token/refresh/ - формирует (более долгий по использованию)токен для каждого пользователя с правами соответствующие их роли

**2. Topics:**
- http://127.0.0.1:8000/topics/ - выводит список всех тем (GET)
- http://127.0.0.1:8000/topics/1/  выводит тему с id = 1 (GET)
- http://127.0.0.1:8000/topics/create/ - создает тему (POST)
```
{
    "title": "Маркетинг",
    "description": "Маркетинг — это объединение методов и стратегий, 
    которые нужны для создания и продвижения продукта или услуги.",
}
```
- http://127.0.0.1:8000/topics/update/1/ - обновляет тему с id = 1 (PATCH)
```
{
    "id": 1,
    "title": "Маркетинг",
    "description": "Маркетинг — это объединение методов и стратегий, 
    которые нужны для создания и продвижения продукта или услуги.",
    "author": 1
}
```
- http://127.0.0.1:8000/topics/delete/1/ - удаляет тему с id = 1 (DELETE)

**3. Materials:**
- http://127.0.0.1:8000/materials/ - выводит список всех разделов (GET)
- http://127.0.0.1:8000/materials/1/ - выводит раздел с id = 1 (GET)
- http://127.0.0.1:8000/materials/create/ - создает раздел (POST)
```
{
    "title": "Функции маркетинга",
    "study_topic": 1
}
```
- http://127.0.0.1:8000/materials/update/1/ - обновляет раздел с id = 1 (PATCH)
```
{
    "id": 1,
    "title": "Функции маркетинга",
    "description": "1. Аналитическая. Маркетинг позволяет проанализировать 
    внутренние процессы компании и среду вокруг: структуру рынка, конкурентов, потребителей.
    2. Производственная. В производственной функции реализуется все, что касается создания 
    продукта: идея, разработка, организация создания и снабжения.
    3. Сбытовая. Сбытовая функция регулирует количество и качество продукта, 
    которое требует потенциальный покупатель.",
    "study_topic": 1,
    "author": 1
}
```
- http://127.0.0.1:8000/materials/delete/1/ -  удаляет раздел с id = 1 (DELETE)

**4. Questions:**
- http://127.0.0.1:8000/questions/ - выводит список всех вопросов (GET)
- http://127.0.0.1:8000/questions/create/ - создает вопрос (POST)
```
{
    "question": "Сколько функций маркетинга?",
    "item_materials": 1
}
```
- http://127.0.0.1:8000/questions/update/1/ - обновляет вопрос с id = 1 (PATCH)
```
{
    "id": 1,
    "question": "Сколько функций маркетинга?",
    "item_materials": 1,
    "author": 1
}
```
- http://127.0.0.1:8000/questions/delete/1/ -  удаляет вопрос с id = 1 (DELETE)

**5. Answers:**
- http://127.0.0.1:8000/answers/ - выводит список всех ответов (GET)
- http://127.0.0.1:8000/answers/create/ - создает ответ (POST)
```
{
    "question": 1,
    "answer": "3",
    "is_correct": true,
    "not_correct": false
}
```
- http://127.0.0.1:8000/answers/update/1/ - обновляет ответ с id = 1 (PATCH)
```
{
    "id": 1,
    "answer": "3",
    "is_correct": true,
    "not_correct": false,
    "question": 1,
    "author": 1
}
```
- http://127.0.0.1:8000/answers/delete/1/ -  удаляет ответ с id = 1 (DELETE)
---
# Для работы программы необходимо:

1. Создать новый проект в PyCharm.
2. Склонировать репозиторий в PyCharm (команда: 
   - git clone https://github.com/AnastasiaRC/self_study.git)
3. Перейти в папку приложения
4. Установть виртуальное окружение: 
   - python3 -m venv venv
5. Активировать его:
   - source venv/bin/activate
6. Установить зависимости 
   - pip3 install -r requirements.txt
7. создать файл .env по примеру .env.sample и заполнить своими данными
8. Создать базу данных в postgres:
    - psql -U postgres
    - create database POSTGRES_DB_NAME(из файла .env);
    - \q
9. Создаем и применяем миграции
   - python3 manage.py makemigrations
   - python3 manage.py migrate
10. Загрузить данные из файлов json 
    - python3 manage.py loaddata users.json
    - python3 manage.py loaddata study.json
11. Запустить сервер
    - python3 manage.py runserver
12. Для запуска теста используйте команду:
    - python3 manage.py full
